{% extends "base.html" %}
{% block title %}{{term.term}}{% endblock %}

{% block content %}
<div class="container">
    <div class="card">
        <div class="card-body">
            <h5 class="card-title mb-3">{{ term.term }}</h5>
            <div class="card-text">
                <div class="row">
                    <div class="col-sm-1 text-center">
                        <i class="fas fa-arrow-up"></i><br>
                        0<br>
                        <i class="fas fa-arrow-down"></i><br>
                    </div>
                    <div class="col">
                    {{ term.definition }} 
                    {% if current_user == term.author %}
                    <a class="card-link" href="{{ url_for('term.update', id=term.id) }}">[update]</a>
                    <a href="{{ url_for('term.delete',id=term.id)}}">[delete]</a>
                    {% endif %}
                    {% if not current_user.is_tracking(term) %}
                    <a href="{{ url_for('term.track',id=term.id)}}">[track]</a>
                    {% else%}
                    <a href="{{ url_for('term.untrack',id=term.id)}}">[untrack]</a>
                    {% endif %}
                    <!--has.permission?-->
                    <a href="{{ url_for('term.add',id=term.id, relationship='example')}}">[add related]</a>
                    <a href="{{ url_for('term.comment',id=term.id)}}">[comment]</a>
                    </div>
                </div>
            </div>
        </div>
        <div class="card-footer">
            <h6 class="card-title">Related terms</h6>
            {% if term.has_children() %}
                {% for child in children %}
                <a href="{{ url_for('term.show', id=child.id) }}">{{ child.term }}</a>
                <br>
                {% endfor %}
            {% endif %}
            {% if term.has_parents() %}
                {% for parent in parents %}
                <a href="{{ url_for('term.show', id=parent.id) }}">{{ parent.term }}</a>
                <br>
                {% endfor %}
            {% endif %}
            {% if term.has_comments() %}
                <h6 class="card-title">Comments</h6>
                {% for comment in comments %}
                <p>
                    {{ comment.body }}
                    <a href="{{ url_for('term.edit_comment',id=comment.id)}}">[edit]</a>
                    <a href="{{ url_for('term.delete_comment',id=comment.id)}}">[delete]</a>
                    <br>
                    by <a href="{{ url_for('main.user', username=comment.author.username) }}">{{ comment.author.username }}</a>
                {% endfor %}
                </p>
            <br>
            {% endif %}
    
        </div>
    </div>
</div>
{% endblock %}